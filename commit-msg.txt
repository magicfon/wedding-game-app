🔧 修復答題記錄資料表欄位名稱問題

## 📊 **問題根本原因發現**

經過深入分析發現答題人數和頭像顯示問題的根本原因：

### **❌ 錯誤的資料表和欄位名稱**
1. **統計 API 錯誤**：`/api/admin/stats` 使用了不存在的 `user_answers` 表
2. **欄位名稱錯誤**：查詢 `answer_records` 時使用了錯誤的欄位名
   - ❌ `answer` → ✅ `selected_answer`
   - ❌ `line_id` → ✅ `user_line_id`

### **🔍 資料表使用情況釐清**

#### **`answer_records` 表** ✅ **主要答題記錄表**
- **用途**：儲存所有答題記錄的主要表格
- **調用時機**：
  1. 答題提交：`/api/quiz/scoring` - 插入新記錄
  2. 答題分佈：`game-live/page.tsx` - 查詢統計
  3. 即時更新：Realtime 訂閱
  4. 分數計算：各種分數相關 API
  5. 統計資料：排行榜、歷史記錄

#### **`user_answers` 表** ❌ **不存在或已廢棄**
- **問題**：只在統計 API 中被錯誤引用
- **影響**：導致答題數統計錯誤

## 🔧 **修復內容**

### **1. 統計 API 修復**
```typescript
// Before: 錯誤的表名
supabase.from('user_answers').select('*', { count: 'exact', head: true })

// After: 正確的表名
supabase.from('answer_records').select('*', { count: 'exact', head: true })
```

### **2. 答題分佈查詢修復**
```typescript
// Before: 錯誤的欄位名
.select('answer, line_id')
answerRecords.filter(record => record.answer === option)
userMap.get(record.line_id)

// After: 正確的欄位名
.select('selected_answer, user_line_id')
answerRecords.filter(record => record.selected_answer === option)
userMap.get(record.user_line_id)
```

### **3. 修復範圍**
- ✅ `wedding-game-app/src/app/api/admin/stats/route.ts`
- ✅ `wedding-game-app/src/app/game-live/page.tsx`
- ✅ `wedding-game-app/src/app/api/debug/test-answer-distribution/route.ts`

## 🎯 **預期效果**

修復後應該能正確：
- ✅ 顯示每個選項的實際答題人數
- ✅ 計算準確的百分比
- ✅ 顯示選擇該選項的玩家頭像
- ✅ 正確統計總答題數
- ✅ 實時更新答題分佈

## 🔍 **測試建議**

1. 使用調試工具：`/debug/answer-test`
2. 輸入有答題記錄的題目 ID
3. 檢查是否正確顯示：
   - 答題記錄數量
   - 用戶資料
   - 分佈統計
   - 頭像顯示
