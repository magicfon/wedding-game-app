ğŸ”§ ä¿®å¾©ç­”é¡Œè¨˜éŒ„è³‡æ–™è¡¨æ¬„ä½åç¨±å•é¡Œ

## ğŸ“Š **å•é¡Œæ ¹æœ¬åŸå› ç™¼ç¾**

ç¶“éæ·±å…¥åˆ†æç™¼ç¾ç­”é¡Œäººæ•¸å’Œé ­åƒé¡¯ç¤ºå•é¡Œçš„æ ¹æœ¬åŸå› ï¼š

### **âŒ éŒ¯èª¤çš„è³‡æ–™è¡¨å’Œæ¬„ä½åç¨±**
1. **çµ±è¨ˆ API éŒ¯èª¤**ï¼š`/api/admin/stats` ä½¿ç”¨äº†ä¸å­˜åœ¨çš„ `user_answers` è¡¨
2. **æ¬„ä½åç¨±éŒ¯èª¤**ï¼šæŸ¥è©¢ `answer_records` æ™‚ä½¿ç”¨äº†éŒ¯èª¤çš„æ¬„ä½å
   - âŒ `answer` â†’ âœ… `selected_answer`
   - âŒ `line_id` â†’ âœ… `user_line_id`

### **ğŸ” è³‡æ–™è¡¨ä½¿ç”¨æƒ…æ³é‡æ¸…**

#### **`answer_records` è¡¨** âœ… **ä¸»è¦ç­”é¡Œè¨˜éŒ„è¡¨**
- **ç”¨é€”**ï¼šå„²å­˜æ‰€æœ‰ç­”é¡Œè¨˜éŒ„çš„ä¸»è¦è¡¨æ ¼
- **èª¿ç”¨æ™‚æ©Ÿ**ï¼š
  1. ç­”é¡Œæäº¤ï¼š`/api/quiz/scoring` - æ’å…¥æ–°è¨˜éŒ„
  2. ç­”é¡Œåˆ†ä½ˆï¼š`game-live/page.tsx` - æŸ¥è©¢çµ±è¨ˆ
  3. å³æ™‚æ›´æ–°ï¼šRealtime è¨‚é–±
  4. åˆ†æ•¸è¨ˆç®—ï¼šå„ç¨®åˆ†æ•¸ç›¸é—œ API
  5. çµ±è¨ˆè³‡æ–™ï¼šæ’è¡Œæ¦œã€æ­·å²è¨˜éŒ„

#### **`user_answers` è¡¨** âŒ **ä¸å­˜åœ¨æˆ–å·²å»¢æ£„**
- **å•é¡Œ**ï¼šåªåœ¨çµ±è¨ˆ API ä¸­è¢«éŒ¯èª¤å¼•ç”¨
- **å½±éŸ¿**ï¼šå°è‡´ç­”é¡Œæ•¸çµ±è¨ˆéŒ¯èª¤

## ğŸ”§ **ä¿®å¾©å…§å®¹**

### **1. çµ±è¨ˆ API ä¿®å¾©**
```typescript
// Before: éŒ¯èª¤çš„è¡¨å
supabase.from('user_answers').select('*', { count: 'exact', head: true })

// After: æ­£ç¢ºçš„è¡¨å
supabase.from('answer_records').select('*', { count: 'exact', head: true })
```

### **2. ç­”é¡Œåˆ†ä½ˆæŸ¥è©¢ä¿®å¾©**
```typescript
// Before: éŒ¯èª¤çš„æ¬„ä½å
.select('answer, line_id')
answerRecords.filter(record => record.answer === option)
userMap.get(record.line_id)

// After: æ­£ç¢ºçš„æ¬„ä½å
.select('selected_answer, user_line_id')
answerRecords.filter(record => record.selected_answer === option)
userMap.get(record.user_line_id)
```

### **3. ä¿®å¾©ç¯„åœ**
- âœ… `wedding-game-app/src/app/api/admin/stats/route.ts`
- âœ… `wedding-game-app/src/app/game-live/page.tsx`
- âœ… `wedding-game-app/src/app/api/debug/test-answer-distribution/route.ts`

## ğŸ¯ **é æœŸæ•ˆæœ**

ä¿®å¾©å¾Œæ‡‰è©²èƒ½æ­£ç¢ºï¼š
- âœ… é¡¯ç¤ºæ¯å€‹é¸é …çš„å¯¦éš›ç­”é¡Œäººæ•¸
- âœ… è¨ˆç®—æº–ç¢ºçš„ç™¾åˆ†æ¯”
- âœ… é¡¯ç¤ºé¸æ“‡è©²é¸é …çš„ç©å®¶é ­åƒ
- âœ… æ­£ç¢ºçµ±è¨ˆç¸½ç­”é¡Œæ•¸
- âœ… å¯¦æ™‚æ›´æ–°ç­”é¡Œåˆ†ä½ˆ

## ğŸ” **æ¸¬è©¦å»ºè­°**

1. ä½¿ç”¨èª¿è©¦å·¥å…·ï¼š`/debug/answer-test`
2. è¼¸å…¥æœ‰ç­”é¡Œè¨˜éŒ„çš„é¡Œç›® ID
3. æª¢æŸ¥æ˜¯å¦æ­£ç¢ºé¡¯ç¤ºï¼š
   - ç­”é¡Œè¨˜éŒ„æ•¸é‡
   - ç”¨æˆ¶è³‡æ–™
   - åˆ†ä½ˆçµ±è¨ˆ
   - é ­åƒé¡¯ç¤º
