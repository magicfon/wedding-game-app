## Context

這個變更將在照片管理介面中新增投票者顯示功能。管理員在查看照片詳情時，能夠看到所有對該照片投票的用戶列表，包括他們的 LINE 名稱和大頭貼。

## Goals / Non-Goals

### Goals
- 提供透明度：讓管理員了解照片的受歡迎程度
- 增強管理功能：幫助管理員做出更明智的內容決策
- 保持介面簡潔：使用網格布局高效顯示投票者資訊
- 確保安全性：只有管理員能查看投票者資訊

### Non-Goals
- 顯示投票時間資訊
- 提供投票者互動功能（如聯繫投票者）
- 修改投票系統的核心邏輯
- 影響一般用戶的照片牆體驗

## Decisions

### API 設計
- **端點**: `GET /api/admin/photos/voters?photoId={id}`
- **權限**: 需要管理員權限驗證
- **回應格式**: 
  ```json
  {
    "success": true,
    "data": {
      "photoId": 123,
      "voters": [
        {
          "lineId": "U123...",
          "displayName": "張小明",
          "avatarUrl": "https://..."
        }
      ],
      "totalVoters": 5
    }
  }
  ```

### 資料庫查詢設計
- 使用 JOIN 查詢連接 `votes`、`users` 表
- 查詢條件: `votes.photo_id = ?`
- 排序: 按投票時間倒序（最新的在前）
- 欄位選擇: 只選擇必要的用戶資訊

### UI 設計
- **位置**: 照片詳情彈窗的操作按鈕下方
- **布局**: 響應式網格（桌面 4 列，平板 3 列，手機 2 列）
- **投票者卡片**: 包含頭像（圓形）和顯示名稱
- **空狀態**: 顯示「尚無投票者」訊息
- **載入狀態**: 顯示骨架屏或載入動畫

### 錯誤處理
- API 錯誤: 顯示友好的錯誤訊息
- 頭像載入失敗: 顯示預設用戶圖標
- 網路錯誤: 提供重試選項

## Risks / Trade-offs

### Risks
- **效能風險**: 大量投票者可能影響載入速度
  - **緩解**: 實作適當的查詢優化和索引
- **隱私考量**: 顯示用戶資訊可能涉及隱私問題
  - **緩解**: 僅限管理員存取，遵循資料保護原則

### Trade-offs
- **簡潔性 vs 詳細資訊**: 選擇不顯示投票時間以保持介面簡潔
- **即時性 vs 效能**: 選擇在打開照片詳情時才載入投票者資訊

## Migration Plan

### 階段 1: 後端開發
1. 創建 API 端點
2. 實作權限驗證
3. 開發資料庫查詢邏輯
4. 測試 API 功能

### 階段 2: 前端開發
1. 修改照片詳情彈窗組件
2. 實作投票者列表組件
3. 整合 API 呼叫
4. 實作載入和錯誤狀態

### 階段 3: 測試與優化
1. 功能測試
2. 效能測試
3. 使用者體驗測試
4. 安全性測試

## Open Questions

- 是否需要限制顯示的投票者數量？（目前決定不限制）
- 投票者列表是否需要搜尋或篩選功能？（目前決定不需要）
- 是否需要統計資訊，如投票時間分佈？（目前決定不需要）